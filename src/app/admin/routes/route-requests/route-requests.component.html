<div fxLayout="column" *ngIf="routes.length > 0">
  <div fxlayout="row" class="notification-text" fxFlex="100%" fxLayoutAlign="start stretch">
    Hi {{ user.firstName }}, you have {{ routes.length }} New Request{{ routes.length > 1 ? 's' : '' }}
  </div>
</div>

<div
  *ngIf="routes.length > 0"
  fxlayout="row wrap" fxLayout.xs="column"
  fxLayout.sm="column" fxLayoutAlign="space-around start"
  class="app-routes-container">

  <div class="routes-grid" fxFlex="45%" fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutAlign="space-between center">
    <div
      *ngFor="let route of routes; let idx = index"
      [className]="isRouteActive(idx) ? 'active route-box' : 'route-box'"
      (click)="onClickRouteBox(idx, route)"
      [style.background-image]="'url(' + route.routeImageUrl + ')'">
      <div
        class="transparent-background"
        fxLayout="column"
        fxLayoutAlign="space-evenly center">
        <span class="route-name" [title]="route.busStop.address|customTitlecase">
          {{ route.busStop.address|customTitlecase }}
        </span>
        <span class="route-distance">{{ route.busStopDistance }}{{ route.busStopDistance ? 'km' : '' }}</span>
      </div>
    </div>
  </div>

  <div fxLayout="row wrap" fxFlex="55%" fxLayout.lt-md="column" fxLayoutAlign="center center" class="left-column">
    <mat-card class="details-card">

      <mat-card-content>
        <mat-tab-group>
          <mat-tab label="Request">
            <img
              class="map-image"
              [src]="getCurrentRoute().routeImageUrl ||
              'https://via.placeholder.com/500?text=We could not load the map for this route'"
              [alt]="getCurrentRoute().distance" />
          </mat-tab>
          <mat-tab label="View Details">Content 2</mat-tab>
        </mat-tab-group>
      </mat-card-content>

      <mat-card-footer>
        <div class="footer-text">
          <img matCardAvatar src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu">
          <span>
            {{ getCurrentRoute().engagement.fellow.name }} is requesting a route - {{ getCurrentRoute().busStop.address }}
          </span>
        </div>
        <div class="mat-card-action-buttons">
          <button class="accept-button"><span class="accept">ACCEPT</span></button>
          <button class="reject-button"><span class="reject">REJECT</span></button>
        </div>
      </mat-card-footer>

    </mat-card>
  </div>

</div>

<app-empty-page *ngIf="routes.length === 0" [text]="'No new route requests.'"></app-empty-page>


<div class="bottom-image"></div>

